"use strict";(self.webpackChunkwrt_theme=self.webpackChunkwrt_theme||[]).push([[879],{3879:function(e,t,r){r.r(t);var s=r(6989),a=r.n(s),n=r(1975);t.default=async()=>{const e=document.getElementById("js-newsletter-signup"),t=document.getElementById("email"),r=document.querySelector('input[name="wrt-newsletter"]');if(!e||!t||!r)return;const s=document.querySelector(".newsletter-signup__status"),c=(e,r="success")=>{s&&(s.classList.add(r),s.style.display="block",s.textContent=(0,n.escapeHTML)(e),"error"===r&&t.classList.add("is-error"))};e.addEventListener("click",(async e=>{if(e.preventDefault(),e.currentTarget.classList.add("button-loading"),s&&(s.classList.remove("error"),s.classList.remove("success"),s.style.display="none",s.textContent="",t.classList.remove("is-error")),!t.value)return void c("Please enter an email address.","error");const n=[r.value],o=document.querySelectorAll('input[name="wrt-newsletters[]"]:checked');Array.from(o).forEach((e=>{n.push(e.value)})),grecaptcha.ready((()=>{grecaptcha.execute(reCAPTCHA.siteKey,{action:"submit"}).then((async r=>{try{(await a()({path:"/wrt/v1/newsletters/subscribe",method:"POST",parse:!1,data:{email:t.value,lists:n,token:r}})).ok&&c("Success! You have been added to our newsletter.")}catch(t){console.warn("Signup error",e),c("Error! Unable to subscribe to newsletter.","error")}}))})),e.currentTarget.classList.remove("button-loading")}))}}}]);