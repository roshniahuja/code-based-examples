!function(){"use strict";var e={n:function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,{a:a}),a},d:function(t,a){for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.blocks,a=window.wp.element,n=window.wp.apiFetch,l=e.n(n),r=window.wp.blockEditor,o=window.wp.components,s=window.wp.i18n;var i=e=>{const{attributes:t,setAttributes:n}=e,{button:i,description:c,label:u,newsletter:d,subNewsletters:m,title:p}=t,[w,h]=(0,a.useState)([]),b=(0,r.useBlockProps)();(0,a.useEffect)((()=>{!async function(){try{const e=await l()({path:"/wrt/v1/newsletters"});h(e)}catch(e){console.warn("Newsletter fetch error",e)}}()}),[]);const g=(e,t,a)=>{n({subNewsletters:m.map((n=>n.id===e?{...n,[t]:a}:n))})};return(0,a.createElement)("div",b,(0,a.createElement)(r.InspectorControls,null,(0,a.createElement)(o.PanelBody,{title:(0,s.__)("Settings")},(0,a.createElement)(o.PanelRow,null,(0,a.createElement)(o.FormTokenField,{label:(0,s.__)("Main newsletter"),maxLength:1,onChange:e=>{n({newsletter:w.filter((t=>e.includes(t.name)))})},placeholder:(0,s.__)("Search for a newsletter"),suggestions:w.map((e=>e.name)),value:d.map((e=>e.name)),__experimentalShowHowTo:!1})),(0,a.createElement)(o.PanelRow,null,(0,a.createElement)(o.FormTokenField,{label:(0,s.__)("Sub newsletters"),onChange:e=>{n({subNewsletters:w.filter((t=>e.includes(t.name)))})},placeholder:(0,s.__)("Search for a newsletter"),suggestions:w.map((e=>e.name)),value:m.map((e=>e.name)),__experimentalShowHowTo:!1})))),(0,a.createElement)(r.RichText,{allowedFormats:[],onChange:e=>n({title:e}),placeholder:(0,s.__)("Stay in touch"),tagName:"h2",value:p}),(0,a.createElement)(r.RichText,{allowedFormats:[],className:"newsletter-signup__description",onChange:e=>n({description:e}),placeholder:(0,s.__)("All the best teaching and learning ideas, straight to your inbox"),tagName:"p",value:c}),(0,a.createElement)("div",{className:"newsletter-signup__email-input"},(0,a.createElement)("input",{type:"email",id:"email",name:"",placeholder:"you@example.com"}),(0,a.createElement)(r.RichText,{allowedFormats:[],className:"button-secondary",onChange:e=>n({button:e}),placeholder:(0,s.__)("Subscribe"),tagName:"button",value:i})),(0,a.createElement)(r.RichText,{allowedFormats:[],onChange:e=>n({label:e}),placeholder:(0,s.__)("Select one or more of the newsletters that you’d like to receive. You can update your preferences or unsubscribe at any time."),tagName:"label",value:u}),m.length>0&&m.map((e=>(0,a.createElement)("div",{className:"checkbox-container",key:e.id},(0,a.createElement)("input",{type:"checkbox"}),(0,a.createElement)("label",null,(0,a.createElement)(r.RichText,{allowedFormats:[],placeholder:(0,s.__)("Newsletter name"),onChange:t=>g(e.id,"label",t),tagName:"span",value:e.label??e.name}),(0,a.createElement)(r.RichText,{allowedFormats:[],placeholder:(0,s.__)("Newsletter description"),onChange:t=>g(e.id,"description",t),tagName:"span",value:e.description}))))))};var c=()=>null,u=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"title":"Newsletter Sign Up","description":"A block to allow the user to sign up for a specific newsletter with additional options.\\n","textdomain":"wrt-theme","name":"wrt/newsletter-signup","icon":"feedback","category":"widgets","attributes":{"button":{"type":"string","default":"Subscribe"},"description":{"type":"string","default":""},"label":{"type":"string","default":""},"newsletter":{"type":"array","default":[]},"subNewsletters":{"type":"array","default":[]},"title":{"type":"string","default":""}},"example":{"attributes":{"button":"Subscribe","description":"All the best teaching and learning ideas, straight to your inbox.","label":"Select one or more of the newsletters that you’d like to receive. You can update your preferences or unsubscribe at any time.","subNewsletters":[{"description":"Don’t miss our weekly trending ideas & giveaways!","id":"1","label":"Best of WeAreTeachers","name":"Best of WeAreTeachers"},{"description":"Book recommendations, book chat, reading lists, and more","id":"2","label":"Best of WeAreTeachers","name":"We Love Books"}],"title":"Stay in touch"}},"supports":{"html":false},"editorScript":"file:./index.js"}');(0,t.registerBlockType)(u,{edit:i,save:c})}();